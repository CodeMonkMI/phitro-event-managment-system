{% extends 'front_base.html' %}

{% block title %}
  Event Management
{% endblock %}
{% block front_content %}
  <!-- Cover Photo -->
  <div class="relative bg-blue-600 overflow-hidden">
    <div class="w-full h-[500px] overflow-hidden">
      <img src="{{ event.cover_url }}" alt="Event Hero" class="w-full h-full object-cover opacity-60" />
    </div>
    <div class="absolute inset-0 flex flex-col justify-center items-center text-white">
      <h1 class="text-4xl font-bold drop-shadow-xl">{{ event.name }}</h1>
      <p class="mt-2 text-lg">{{ event.description }}</p>
    </div>
  </div>

  <div class="bg-gray-50 py-10 px-2 md:px-0">
    <div class="max-w-7xl mx-auto flex flex-col lg:flex-row gap-8">
      <!-- Main Left Content -->
      <div class="w-full lg:w-2/3 flex flex-col gap-8">
        <!-- Event Hero Image + Title + Breadcrumb -->
        <div class="bg-white rounded-2xl shadow p-6">
          <img src="{{ event.cover_url }}" alt="Friendship Dinner" class="rounded-xl w-full mb-4 max-h-[320px] object-cover" />
          <p class="text-gray-600 mb-4">Looking for an opportunity to connect with new people and strengthen your existing friendships? Join us for the Friendship Dinner, a one-of-a-kind event that celebrates the power of human connection and the importance of building meaningful relationships...</p>

          <!-- Social Share -->
          <div class="flex gap-2 mt-2">
            <button class="bg-gray-100 rounded-full p-2 hover:bg-yellow-400 transition"><i class="fab fa-facebook-f text-gray-500"></i></button>
            <button class="bg-gray-100 rounded-full p-2 hover:bg-yellow-400 transition"><i class="fab fa-twitter text-gray-500"></i></button>
            <button class="bg-gray-100 rounded-full p-2 hover:bg-yellow-400 transition"><i class="fab fa-linkedin-in text-gray-500"></i></button>
            <button class="bg-gray-100 rounded-full p-2 hover:bg-yellow-400 transition"><i class="fab fa-envelope text-gray-500"></i></button>
          </div>
        </div>

        <!-- Photos Section -->
        <div>
          <h2 class="text-xl font-semibold mb-4 mt-8">Photos</h2>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-2">
            {% for img in images %}
              <div class="w-full h-44 overflow-hidden rounded-lg">
                <img src="{{ img }}" alt="Event photo {{ forloop.counter }}" class="h-full w-full object-cover" />
              </div>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <aside class="w-full lg:w-1/3 flex flex-col gap-8">
        <!-- Event Details Card -->
        <div class="bg-white rounded-2xl shadow p-6">
          <h3 class="font-bold text-lg mb-4">Event Details</h3>
          <ul class="space-y-3 text-sm">
            <li class="flex items-center gap-3">
              <span class="text-yellow-400">📅</span> Event Date: <span class="font-semibold">{{ event.date }}</span>
            </li>
            <li class="flex items-center gap-3">
              <span class="text-yellow-400">⏰</span> Time: <span class="font-semibold">{{ event.time }}</span>
            </li>

            <li class="flex items-center gap-3">
              <span class="text-yellow-400">📍</span> Location: <span class="font-semibold">{{ event.location }}</span>
            </li>

            <li class="flex items-center gap-3">
              <span class="text-yellow-400">🍴</span> Category: <span class="font-semibold">{{ event.category.name }}</span>
            </li>

            <li class="flex items-center gap-3">
              <span class="text-yellow-400">🎟️</span> Participants: <span class="font-semibold">{{ event.participants.count }}</span>
            </li>
          </ul>
          {% if user.is_authenticated %}
            <form action="{% url 'events_create' %}" method="post">
              {% csrf_token %}

              <button type="submit" class="mt-6 w-full bg-blue-600 hover:bg-blue-500 text-white rounded-lg py-2.5 font-bold">Participate Now</button>
            </form>
          {% else %}
            <p class="text-center py-2 mt-5">
              <a href="{% url 'sign_in' %}" class="text-blue-500 underline">Sign in</a> to participate
            </p>
          {% endif %}
        </div>

        {% comment %}participation form{% endcomment %}
      </aside>
    </div>

    <!-- Related Events -->
    <div class="max-w-7xl mx-auto mt-12">
      <h2 class="text-2xl font-bold mb-6 text-center">Related <span class="text-yellow-400">Events</span></h2>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        {% for rev in related_events %}
          <div class="bg-white rounded-2xl shadow overflow-hidden">
            <div class="h-52 w-full">
              <img src="{{ rev.cover_url }}" alt="LA Beach Picnic" class="h-full w-full object-cover" />
            </div>
            <div class="p-5">
              <div class="mb-2">
                <span class="bg-yellow-400 text-white text-xs font-semibold px-3 py-1 rounded-full">{{ rev.category.name }}</span>
                <span class="text-gray-400 text-xs ml-2">{{ rev.date }}</span>
              </div>
              <h3 class="font-bold text-lg mb-2">{{ rev.name }}</h3>
              <p class="text-gray-500 text-sm">{{ rev.description }}</p>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
