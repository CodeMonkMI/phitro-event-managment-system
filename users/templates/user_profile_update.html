{% extends 'base.html' %}

{% block title %}
  Event Management
{% endblock %}
{% block content %}
  <div>
    {% include 'messages.html' %}
  </div>
  <div class="flex items-start gap-x-10">
    <!-- Sidebar -->
    {% include 'user_profile_sidebar.html' %}

    <!-- Main Content -->
    <main class="flex-1">
      <div class="bg-white shadow-md rounded-lg p-6">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">User Profile Update</h1>

        <form action="{% url 'auth_user_profile_update' %}" method="post" class="space-y-6 grid grid-cols-2 gap-x-6" enctype="multipart/form-data">
          {% csrf_token %}
          {% for field in form %}
            {% if field.name == 'profile_picture' %}
              <div class="flex object-center gap-x-5">
                <div class="flex-1">
                  <label for="{{ field.id_for_label }}" class="block text-sm font-medium text-gray-700">{{ field.label }}</label>

                  <input type="file" name="{{ field.html_name }}" id="{{ field.auto_id }}" class="block w-full text-sm mt-3 text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
                  {% if field.errors %}
                    <ul>
                      {% for error in field.errors %}
                        <li class="text-red-500">{{ error }}</li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </div>

                <div class="w-16 h-16 rounded-full overflow-hidden">
                  <img src="{{ field.value.url }}" alt="User Avatar" class="w-full h-full object-cover" />
                </div>
              </div>
            {% else %}
              <div>
                {{ field.label_tag }}
                {{ field }}
                {% if field.errors %}
                  <ul>
                    {% for error in field.errors %}
                      <li class="text-red-500">{{ error }}</li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </div>
            {% endif %}
          {% endfor %}
          <div class="flex justify-start">
            <button type="submit" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">Update Profile</button>
          </div>
        </form>
      </div>
    </main>
  </div>
{% endblock %}
